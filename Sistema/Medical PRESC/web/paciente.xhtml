<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:decorate xmlns="http://www.w3.org/1999/xhtml"
             xmlns:h="http://xmlns.jcp.org/jsf/html"
             xmlns:p="http://primefaces.org/ui"
             xmlns:ui="http://xmlns.jcp.org/jsf/facelets" template="template.xhtml"
             xmlns:f="http://xmlns.jcp.org/jsf/core">

    <style type="text/css">
        .panelColumns .panelLinha  {
            text-align: center;
        }
        .tbl1 tr td {
            width: 240px; padding: 5px; border: 1px solid #aaa;
        }
        .tbl1 {
            margin: 0 auto;
        }
    </style>

    <h:form>
        <div style="padding: 5px; background: #ddd; border: 1px solid #aaa;">
            <p:fieldset legend="Cadastro de Paciente" style="background: #eee">

                <!-- <p:poll  interval="8" update="{usuarioBean.listar()}"/> -->

                <p:panelGrid class="panelForm" styleClass="panelColumns" style="margin: 0 auto;">
                    <p:row>
                        <p:column style="background: #eee; border: none">
                            <h:outputLabel for="pac" value="PAC:"/>
                        </p:column>
                        <p:column style="background: #eee; border: none">
                            <h:outputLabel for="nome" value="Nome:"/>
                        </p:column>
                        <p:column style="background: #eee; border: none">
                            <h:outputLabel for="apelido" value="Apelido:"/>
                        </p:column>
                        <p:column style="background: #eee; border: none">
                            <h:outputLabel for="sexo" value="Sexo:"/>
                        </p:column>
                        <p:column style="background: #eee; border: none">
                            <h:outputLabel for="idade" value="Idade:"/>
                        </p:column>
                        <p:column style="background: #eee; border: none">
                            <h:outputLabel for="contacto" value="Contacto:"/>
                        </p:column>
                    </p:row>
                    <p:row class="panelLinha" style="background: #ddd">
                        <p:column style="background: #eee; border: none">
                            <p:inputText id="pac" disabled="#{pacienteBean.modo_edicao == true}" style="width: 185px" maxlength="30" value="#{pacienteBean.paciente.pac}"/>
                        </p:column>
                        <p:column style="background: #eee; border: none">
                            <p:inputText id="nome" style="width: 185px" maxlength="25" value="#{pacienteBean.paciente.nome}"/>
                        </p:column>
                        <p:column style="background: #eee; border: none">
                            <p:inputText id="apelido" style="width: 185px" maxlength="30" value="#{pacienteBean.paciente.apelido}"/>
                        </p:column>
                        <p:column style="background: #eee; border: none">
                            <p:selectOneMenu id="sexo" style="width: 185px" value="#{pacienteBean.paciente.sexo}">
                                <f:selectItem itemLabel="Masculino"  itemValue="M"/>
                                <f:selectItem itemLabel="Feminino" itemValue="F"/>
                            </p:selectOneMenu>
                        </p:column>
                        <p:column style="background: #eee; border: none">
                            <p:inputText id="idade" style="width: 185px" maxlength="30" value="#{pacienteBean.paciente.idade}"/>
                        </p:column>
                        <p:column style="background: #eee; border: none">
                            <p:inputText id="contacto" style="width: 185px" maxlength="30" value="#{pacienteBean.paciente.contacto}"/>
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column style="background: #eee; border: none">
                            <h:outputLabel for="gestante" value="Gestante:"/>
                        </p:column>
                        <p:column style="background: #eee; border: none">
                            <h:outputLabel for="peso" value="Peso:"/>
                        </p:column>
                        <p:column style="background: #eee; border: none">
                            <h:outputLabel for="tipoDoc" value="Tipo de documento:"/>
                        </p:column>
                        <p:column style="background: #eee; border: none">
                            <h:outputLabel for="nrDoc" value="Nrº de documento"/>
                        </p:column>
                        <p:column colspan="2" style="background: #eee; border: none">
                            <h:outputLabel style=" width: 100%" for="morada" value="Morada:"/>
                        </p:column>
                    </p:row>
                    <p:row class="panelLinha" style="background: #ddd">
                        <p:column style="background: #eee; border: none">
                            <p:selectOneMenu id="gestante" style="width: 185px" value="#{pacienteBean.paciente.gestante}">
                                <f:selectItem itemLabel="Não"  itemValue="Não"/>
                                <f:selectItem itemLabel="Sim" itemValue="Sim"/>
                            </p:selectOneMenu>
                        </p:column>
                        <p:column style="background: #eee; border: none">
                            <p:inputText id="peso" style="width: 185px" maxlength="25" value="#{pacienteBean.paciente.peso}"/>
                        </p:column>
                        <p:column style="background: #eee; border: none">
                            <p:selectOneMenu id="tipoDoc" style="width: 185px" value="#{pacienteBean.paciente.tipoDoc}">
                                <f:selectItem itemLabel="BI"  itemValue="BI"/>
                                <f:selectItem itemLabel="Passaporte" itemValue="Passaporte"/>
                                <f:selectItem itemLabel="DIRE" itemValue="DIRE"/>
                            </p:selectOneMenu>
                        </p:column>
                        <p:column style="background: #eee; border: none">
                            <p:inputText id="nrDoc" style="width: 185px" maxlength="30" value="#{pacienteBean.paciente.nrDoc}"/>
                        </p:column>
                        <p:column colspan="2" style="background: #eee; border: none;">
                            <p:inputText style=" width: 100%" id="morada" maxlength="30" value="#{pacienteBean.paciente.morada}"/>
                        </p:column>
                    </p:row>
                </p:panelGrid>
                <br/>

                <p:toolbar>
                    <p:toolbarGroup align="left">
                        <p:commandButton icon="fa fa-save" value="&nbsp;Salvar" action="#{pacienteBean.adicionar()}" ajax="true" update="@form"></p:commandButton>
                        <p:commandButton icon="fa fa-close" value="&nbsp;Cancelar" action="#{pacienteBean.cancelar()}" ajax="true" update="@form"></p:commandButton>
                    </p:toolbarGroup>
                </p:toolbar>
                <br/>

                <p:growl id="messages" showDetail="true" sticky="true"/>

                <p:dataTable value="#{pacienteBean.pacientes}" paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" selectionMode="single" rowKey="#{paciente.idPaciente}" rows="5" paginator="true" widgetVar="personTable" var="paciente">
                    <p:column style="text-align: center" headerText="Operação" width="100">
                        <p:commandButton style="font-size: 17px" icon="fa fa-trash-o" actionListener="#{pacienteBean.deletar(paciente)}" update="@form">
                            <p:confirm header="Confirmação" message="Deseja mesmo remover o paciente?" icon="ui-icon-alert">
                            </p:confirm>
                        </p:commandButton>

                        <p:commandButton style="font-size: 17px" icon="fa fa-pencil" action="#{pacienteBean.editar(paciente)}" update="@form"></p:commandButton>

                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                            <p:commandButton value="&nbsp;Sim" type="button" styleClass="ui-confirmdialog-yes" icon="fa fa-check" />
                            <p:commandButton value="&nbsp;Não" type="button" styleClass="ui-confirmdialog-no" icon="fa fa-close" />
                        </p:confirmDialog>

                    </p:column>
                    <p:column headerText="PAC" sortBy="#{paciente.pac}">
                        <h:outputText value="#{paciente.pac}"></h:outputText>
                    </p:column>
                    <p:column headerText="Nome" sortBy="#{paciente.nome}">
                        <h:outputText value="#{paciente.nome}"></h:outputText>
                    </p:column>
                    <p:column headerText="Apelido" sortBy="#{paciente.apelido}">
                        <h:outputText value="#{paciente.apelido}"></h:outputText>
                    </p:column>
                    <p:column headerText="Sexo" sortBy="#{paciente.sexo}">
                        <h:outputText value="#{paciente.sexo}"></h:outputText>
                    </p:column>
                    <p:column headerText="Contacto" sortBy="#{paciente.contacto}">
                        <h:outputText value="#{paciente.contacto}"></h:outputText>
                    </p:column>

                </p:dataTable>
                <br/>
            </p:fieldset>
        </div>
        <p:idleMonitor timeout="1200000">
            <p:ajax event="idle" listener="#{pacienteBean.reload()}" update="messages"/> 
        </p:idleMonitor>
    </h:form>

</ui:decorate>